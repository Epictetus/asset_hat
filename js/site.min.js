(function(w){var loc=w.location;function showSection(href){var h=w.history,p='pushState',$target=$(href),animDuration=500;$('html, body').animate({scrollTop:$target.offset().top},animDuration);setTimeout(function(){if(h[p]){h[p](null,document.title,href);}
loc.hash=href;},animDuration);}
if(loc.hash!==''){$(function(){var hash=loc.hash;if(hash!==''){$('nav a').each(function(){var href='#'+this.href.split('#')[1];if(href===hash){$(this).closest('li').addClass('current');}});}});}
$('h1 a').live('click',function(ev){$('nav li.current').removeClass('current');showSection($(this).attr('href'));ev.preventDefault();});$('nav a').live('click',function(ev){var $a=$(this),$li=$a.closest('li');$li.addClass('current').siblings().removeClass('current');showSection($a.attr('href'));ev.preventDefault();});$(function(){if($('header.site').css('position')!=='fixed'){return;}
var scrollTimeout,$sections=$('section');$(w).scroll(function(){if(scrollTimeout){clearTimeout(scrollTimeout);scrollTimeout=null;}
scrollTimeout=setTimeout(function(){$sections.each(function(i){var $section=$(this),currentSectionId;if($section.offset().top+$section.height()>w.pageYOffset+Math.floor(w.innerHeight/2)){currentSectionId=$section.attr('id');if(currentSectionId==='home'){$('nav li.current').removeClass('current');}else{$('nav a[href="#'+currentSectionId+'"]').closest('li').addClass('current').siblings().removeClass('current');}
return false;}});},250);});});$(function(){var $toggleParent=$('#usage .comment-config').append(' '),$toggle=$('<a class="toggle">(show)</a>').appendTo($toggleParent),$content=$toggleParent.siblings('.config');$toggle.click(function(){var klass='expanded';if($content.hasClass(klass)){$content.removeClass(klass);$toggle.html('(show)');}else{$content.addClass(klass);$toggle.html('(hide)');}});});})(window);
